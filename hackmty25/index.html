<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Ahorro</title>
    <!-- Asumiendo que 'src/style.css' contiene tus estilos. Si no existe, usa Tailwind CDN en un proyecto real. -->
    <link rel="stylesheet" href="src/style.css">

    <!-- Estilos Adicionales Necesarios para los nuevos elementos -->
    <style>
        .app-container { max-width: 420px; margin: 0 auto; background-color: #ffffff; min-height: 100vh; display: flex; flex-direction: column; position: relative; }
        .app-header { background-color: #e63946; color: white; padding: 1rem 1.5rem; display: flex; align-items: center; }
        .content-area { flex-grow: 1; padding: 0 1rem; }
        /* Nuevos estilos para la secci√≥n de Onboarding */
        .onboarding-container { text-align: center; padding: 3rem 1.5rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .onboarding-container h2 { font-size: 1.8rem; font-weight: 700; color: #333; margin-bottom: 0.5rem; }
        .onboarding-container p { color: #666; margin-bottom: 2rem; }
        .onboarding-container .plant-icon { font-size: 8rem; margin-bottom: 1.5rem; }

        /* Estilos del Modal de Configuraci√≥n */
        .goal-setup-content { padding: 1.5rem; }
        .goal-setup-content h3 { margin-bottom: 1.5rem; text-align: center; font-weight: 600;}
        .goal-setup-content label { display: block; margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 500; color: #374151; }
        .goal-setup-content input, .goal-setup-content select { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; margin-bottom: 1rem; font-size: 1rem; }
    </style>
</head>
<body>

    <div class="app-container">
        
        <header class="app-header">
            <span class="back-arrow">&lt;</span>
        </header>

        <!-- +++ 1. SECCI√ìN DE ONBOARDING (RANGO 0) +++ -->
        <section id="onboarding-section" class="onboarding-container">
            <div class="plant-icon">üå±</div>
            <h2>¬°Comienza tu Aventura de Ahorro!</h2>
            <p>Define una meta y frecuencia para que tu planta empiece a crecer.</p>
            <button id="start-goal-btn" class="btn-primary">Establecer Meta</button>
        </section>

        <!-- +++ 2. CONTENIDO PRINCIPAL DE LA APP (RANGO 1+) +++ -->
        <!-- NOTA: Est√° oculto por defecto en el JS inicial hasta que se define una meta. -->
        <div id="main-app-content" class="hidden">
            <main class="content-area">

                <section class="savings-card">
                    <div class="savings-info">
                        <h2 id="total-ahorrado-display">Has ahorrado $0.00</h2>
                        <p id="meta-display"class="meta">Meta $0.00 - Faltan $0.00</p>
                    </div>
                    <div class="savings-yield">
                        <span class="badge-rendimiento">Puntos:</span>
                        <!-- ID a√±adido para mostrar los puntos -->
                        <p id="total-puntos-display" class="anual">0</p>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-bar-fill" class="progress-fill" style="width: 0%;"></div>
                    </div>
                </section>

                <section class="plant-section" id="plant-container">
                    <!-- Aqu√≠ se renderizar√° el modelo 3D de Three.js -->
                    <div class="plant-image">ü™¥</div> 
                </section>

                <section class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-icon">üî•</span>
                        <p>Racha</p>
                        <p class="stat-value">5 d√≠as</p>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üíß</span>
                        <p>Agua</p>
                        <p class="stat-value">10/20</p>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">‚òÄÔ∏è</span>
                        <p>Sol</p>
                        <p class="stat-value">5/10</p>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üåº</span>
                        <p>Fertilizante</p>
                        <p class="stat-value">5/10</p>
                    </div>
                </section>

                <section class="missions-section">
                    <h3>Misiones de hoy</h3>
                    <!-- El contenedor ya estaba, solo le quitamos las tarjetas de ejemplo -->
                    <div class="mission-list" id="mission-list-container">
                        
                    </div>
                </section>

            </main>

            <footer class="app-footer">
                <div class="footer-buttons">
                    <a href="bonificaciones.html" id="bonificaciones-btn" class="btn-bonificaciones">
                        <span class="btn-icon">üéÅ</span>
                        <span class="btn-text">Bonificaciones</span>
                    </a>
                    <button class="btn-depositar">
                        <span class="btn-icon">üí∞</span>
                        <span class="btn-text">Depositar</span>
                    </button>
                </div>
            </footer>
        </div>


        <!-- MODAL DE DEP√ìSITO (Bottom Sheet - L√≥gica de tu amigo) -->
        <div id="bottom-sheet-modal" class="modal-overlay hidden">
             <div class="modal-content">
                <div id="transfer-form-view" class="modal-view">
                    <!-- Contenido del modal de dep√≥sito -->
                    <label for="origin-account-select" class="input-label">Cuenta origen</label>
                    <div class="custom-select-wrapper">
                        <img src="https://via.placeholder.com/24" alt="Card Icon" class="card-icon"> 
                        <select id="origin-account-select" class="custom-select">
                            <option value="1234-5678-9101" selected>1234-5678-9101</option>
                            <option value="xxxx-xxxx-xxxx-xxxx">Otra Cuenta</option>
                        </select>
                        <span class="select-arrow"></span>
                    </div>

                    <label for="deposit-amount-input" class="input-label">¬øCu√°nto quieres depositar?</label>
                    <input type="number" id="deposit-amount-input" placeholder="$ 100.00" min="0" value="100.00">
                    
                    <button id="confirm-deposit-btn" class="btn-primary">Depositar</button>
                    <button id="cancel-deposit-btn" class="btn-secondary">Cancelar</button>
                </div>

                <div id="success-view" class="modal-view hidden">
                    <div class="success-icon">
                        <span class="checkmark">‚úî</span>
                    </div>
                    <h3>Transferencia realizada con √©xito</h3>
                    <button id="close-success-btn" class="btn-primary">Cerrar</button>
                </div>

            </div>
        </div>

        <!-- +++ 3. MODAL DE CONFIGURACI√ìN DE META (Para Rango 0) +++ -->
        <div id="goal-setup-modal" class="modal-overlay hidden">
            <div class="modal-content goal-setup-content">
                <h3>Define tu Meta de Ahorro</h3>

                <label for="goal-amount-input">Monto total de la meta ($)</label>
                <input type="number" id="goal-amount-input" placeholder="Ej: 5000.00" min="1" value="1000.00">

                <label for="goal-frequency-select">Frecuencia de ahorro deseada</label>
                <select id="goal-frequency-select">
                    <option value="Diario">Diario</option>
                    <option value="Semanal" selected>Semanal</option>
                    <option value="Mensual">Mensual</option>
                </select>

                <button id="confirm-goal-btn" class="btn-primary">Confirmar Meta</button>
            </div>
        </div>
        
    </div>
    <!-- Aseg√∫rate que la ruta a main.ts sea correcta -->
    <script type="module" src="src/main.ts"></script>
</body>

</html>